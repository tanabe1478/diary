<!DOCTYPE html><html><head><meta charSet="utf-8" data-next-head=""/><meta name="viewport" content="width=device-width" data-next-head=""/><title data-next-head="">Next.jsブログの大規模アップデート作業記録</title><link rel="preload" href="/diary/_next/static/css/ca482c222ccb3f68.css" as="style"/><link rel="stylesheet" href="/diary/_next/static/css/ca482c222ccb3f68.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/diary/_next/static/chunks/polyfills-42372ed130431b0a.js"></script><script src="/diary/_next/static/chunks/webpack-eb0253f719817966.js" defer=""></script><script src="/diary/_next/static/chunks/framework-b96261d959dd50e7.js" defer=""></script><script src="/diary/_next/static/chunks/main-b1c8e0ab74db8550.js" defer=""></script><script src="/diary/_next/static/chunks/pages/_app-318b04f3c2670c6a.js" defer=""></script><script src="/diary/_next/static/chunks/890-ba4abdd1ca3afaaa.js" defer=""></script><script src="/diary/_next/static/chunks/pages/articles/%5BissueNumber%5D-a7573b053ef92b49.js" defer=""></script><script src="/diary/_next/static/J_h71aom4t-UlO6CMNZQs/_buildManifest.js" defer=""></script><script src="/diary/_next/static/J_h71aom4t-UlO6CMNZQs/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen bg-gray-50 dark:bg-gray-800 dark:text-gray-100"><header class="container mx-auto max-w-2xl px-8 py-12"><nav><p><a class="font-bold text-gray-900 visited:text-gray-900 dark:text-gray-300 dark:visited:text-gray-300" href="/diary">My blog</a></p></nav></header><main class="container mx-auto max-w-2xl px-8 py-12 shadow-md bg-white dark:bg-gray-900"><div class="divide-y divide-gray-300 dark:divide-gray-700"><article class="markdown"><header><time dateTime="2025-02-02T16:50:16Z" title="2025-02-02T16:50:16Z" class="block text-[.8rem] text-gray-500 dark:text-gray-400">2025-02-02</time><h1>Next.jsブログの大規模アップデート作業記録</h1></header><aside class="block text-[.8rem] text-gray-500 dark:text-gray-400"><p>Posted by <a class="text-gray-900 hover:underline visited:text-gray-600 dark:text-gray-300 dark:visited:text-gray-500" href="https://github.com/tanabe1478">tanabe1478</a> at <a class="text-gray-900 hover:underline visited:text-gray-600 dark:text-gray-300 dark:visited:text-gray-500" href="https://github.com/tanabe1478/diary/issues/16">#16</a>.</p></aside><div><p><a href="https://tanabe1478.github.io/diary/articles/1">過去の記事</a>で書いたように Next.js 製なのだが諸々のライブラリのアップデートをしようと思い立った。最近触っていなかったので Cursor に手伝ってもらいながら完了した。
とりあえずカスタマイズはできる環境が整ったかなと思う。
変更内容を Cursor に出力してもらった。</p>
<p>動き出しが億劫なことが多いのだが LLM のおかげでかなり助けられている。</p>
<p>=======</p>
<p>Next.jsベースのブログシステムの依存関係を包括的に更新しました。この更新は、セキュリティの向上、新機能の活用、そして将来的な保守性の向上を目的としています。</p>
<h2>更新の概要</h2>
<h3>1. ブラウザリストのデータベース更新 (<a href="https://github.com/tanabe1478/diary/commit/312e519"><code>312e519</code></a>)</h3>
<ul>
<li><code>npx browserslist@latest --update-db</code>を実行</li>
<li>対応ブラウザのデータベースを最新化し、より正確なCSS自動プレフィックス生成を実現</li>
</ul>
<h3>2. Next.jsのリンクコンポーネント更新 (<a href="https://github.com/tanabe1478/diary/commit/836a777"><code>836a777</code></a>)</h3>
<ul>
<li>Next.jsの新しいLink APIに対応</li>
<li>スタイリングをインラインで適用するように変更</li>
<li>ダークモード対応のスタイルを追加</li>
<li>アクセシビリティの向上</li>
</ul>
<h3>3. CI/CD環境の更新 (<a href="https://github.com/tanabe1478/diary/commit/7ce4a19"><code>7ce4a19</code></a>)</h3>
<ul>
<li>GitHub Actionsのワークフローを最新化</li>
<li>Node.js 20.17.0への更新</li>
<li>アクションのバージョンアップ（checkout v4, setup-node v4）</li>
<li>ビルド環境の安定性向上</li>
</ul>
<h3>4. ビルド設定の最適化 (<a href="https://github.com/tanabe1478/diary/commit/45389ad"><code>45389ad</code></a>)</h3>
<ul>
<li>非推奨となった<code>next export</code>コマンドの削除</li>
<li><code>next.config.js</code>での<code>output: 'export'</code>設定への移行</li>
<li>画像最適化の設定追加</li>
<li>TypeScriptの型チェック追加</li>
</ul>
<h3>5. パッケージの段階的更新</h3>
<ol>
<li>
<p>React関連 (<a href="https://github.com/tanabe1478/diary/commit/3447696"><code>3447696</code></a>)</p>
<ul>
<li>React 18系の安定版へ更新</li>
<li>型定義の更新</li>
</ul>
</li>
<li>
<p>Markdown処理関連 (<a href="https://github.com/tanabe1478/diary/commit/12e9679"><code>12e9679</code></a>)</p>
<ul>
<li>unified, remark, rehypeパッケージの更新</li>
<li>GitHub Flavored Markdownのサポート強化</li>
</ul>
</li>
<li>
<p>開発ツール (<a href="https://github.com/tanabe1478/diary/commit/7d70aea"><code>7d70aea</code></a>)</p>
<ul>
<li>ESLint, Prettier, TypeScriptの更新</li>
<li>コード品質管理の強化</li>
</ul>
</li>
<li>
<p>ユーティリティとCSSツール (<a href="https://github.com/tanabe1478/diary/commit/5788f77"><code>5788f77</code></a>)</p>
<ul>
<li>date-fns, glob関連パッケージの更新</li>
<li>TailwindCSS, PostCSSの更新</li>
</ul>
</li>
</ol>
<h2>技術的な改善点</h2>
<ol>
<li>
<p><strong>ビルドシステムの最適化</strong></p>
<ul>
<li>静的エクスポート設定の現代化</li>
<li>ビルドパフォーマンスの向上</li>
</ul>
</li>
<li>
<p><strong>型安全性の向上</strong></p>
<ul>
<li>TypeScript設定の強化</li>
<li>厳密な型チェックの導入</li>
</ul>
</li>
<li>
<p><strong>開発者体験の改善</strong></p>
<ul>
<li>最新のツールチェーンによる開発効率の向上</li>
<li>より良いエラー検出と修正提案</li>
</ul>
</li>
<li>
<p><strong>将来性への対応</strong></p>
<ul>
<li>最新のNext.js機能への対応準備</li>
<li>モダンなReactパターンの採用</li>
</ul>
</li>
</ol>
<h2>まとめ</h2>
<p>この更新作業により、プロジェクトの技術的負債を解消し、より安定した開発・運用基盤を整えることができました。特に、Next.jsの最新機能への対応とNode.js 20対応により、今後のアップデートもよりスムーズに行えるようになりました。</p></div></article></div></main><footer class="container mx-auto max-w-2xl px-8 py-12 text-sm"><nav><ul class="flex flex-row gap-6 justify-center"><li><a class="text-gray-900 visited:text-gray-900 dark:text-gray-300 dark:visited:text-gray-300" href="/diary">Home</a></li></ul></nav></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"issue":{"body":"[過去の記事](https://tanabe1478.github.io/diary/articles/1)で書いたように Next.js 製なのだが諸々のライブラリのアップデートをしようと思い立った。最近触っていなかったので Cursor に手伝ってもらいながら完了した。\nとりあえずカスタマイズはできる環境が整ったかなと思う。\n変更内容を Cursor に出力してもらった。\n\n動き出しが億劫なことが多いのだが LLM のおかげでかなり助けられている。\n\n=======\n\nNext.jsベースのブログシステムの依存関係を包括的に更新しました。この更新は、セキュリティの向上、新機能の活用、そして将来的な保守性の向上を目的としています。\n\n## 更新の概要\n\n### 1. ブラウザリストのデータベース更新 (312e519)\n- `npx browserslist@latest --update-db`を実行\n- 対応ブラウザのデータベースを最新化し、より正確なCSS自動プレフィックス生成を実現\n\n### 2. Next.jsのリンクコンポーネント更新 (836a777)\n- Next.jsの新しいLink APIに対応\n- スタイリングをインラインで適用するように変更\n- ダークモード対応のスタイルを追加\n- アクセシビリティの向上\n\n### 3. CI/CD環境の更新 (7ce4a19)\n- GitHub Actionsのワークフローを最新化\n- Node.js 20.17.0への更新\n- アクションのバージョンアップ（checkout v4, setup-node v4）\n- ビルド環境の安定性向上\n\n### 4. ビルド設定の最適化 (45389ad)\n- 非推奨となった`next export`コマンドの削除\n- `next.config.js`での`output: 'export'`設定への移行\n- 画像最適化の設定追加\n- TypeScriptの型チェック追加\n\n### 5. パッケージの段階的更新\n1. React関連 (3447696)\n   - React 18系の安定版へ更新\n   - 型定義の更新\n\n2. Markdown処理関連 (12e9679)\n   - unified, remark, rehypeパッケージの更新\n   - GitHub Flavored Markdownのサポート強化\n\n3. 開発ツール (7d70aea)\n   - ESLint, Prettier, TypeScriptの更新\n   - コード品質管理の強化\n\n4. ユーティリティとCSSツール (5788f77)\n   - date-fns, glob関連パッケージの更新\n   - TailwindCSS, PostCSSの更新\n\n## 技術的な改善点\n\n1. **ビルドシステムの最適化**\n   - 静的エクスポート設定の現代化\n   - ビルドパフォーマンスの向上\n\n2. **型安全性の向上**\n   - TypeScript設定の強化\n   - 厳密な型チェックの導入\n\n3. **開発者体験の改善**\n   - 最新のツールチェーンによる開発効率の向上\n   - より良いエラー検出と修正提案\n\n4. **将来性への対応**\n   - 最新のNext.js機能への対応準備\n   - モダンなReactパターンの採用\n\n## まとめ\n\nこの更新作業により、プロジェクトの技術的負債を解消し、より安定した開発・運用基盤を整えることができました。特に、Next.jsの最新機能への対応とNode.js 20対応により、今後のアップデートもよりスムーズに行えるようになりました。","bodyHTML":"\u003cp\u003e\u003ca href=\"https://tanabe1478.github.io/diary/articles/1\"\u003e過去の記事\u003c/a\u003eで書いたように Next.js 製なのだが諸々のライブラリのアップデートをしようと思い立った。最近触っていなかったので Cursor に手伝ってもらいながら完了した。\nとりあえずカスタマイズはできる環境が整ったかなと思う。\n変更内容を Cursor に出力してもらった。\u003c/p\u003e\n\u003cp\u003e動き出しが億劫なことが多いのだが LLM のおかげでかなり助けられている。\u003c/p\u003e\n\u003cp\u003e=======\u003c/p\u003e\n\u003cp\u003eNext.jsベースのブログシステムの依存関係を包括的に更新しました。この更新は、セキュリティの向上、新機能の活用、そして将来的な保守性の向上を目的としています。\u003c/p\u003e\n\u003ch2\u003e更新の概要\u003c/h2\u003e\n\u003ch3\u003e1. ブラウザリストのデータベース更新 (\u003ca href=\"https://github.com/tanabe1478/diary/commit/312e519\"\u003e\u003ccode\u003e312e519\u003c/code\u003e\u003c/a\u003e)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ccode\u003enpx browserslist@latest --update-db\u003c/code\u003eを実行\u003c/li\u003e\n\u003cli\u003e対応ブラウザのデータベースを最新化し、より正確なCSS自動プレフィックス生成を実現\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e2. Next.jsのリンクコンポーネント更新 (\u003ca href=\"https://github.com/tanabe1478/diary/commit/836a777\"\u003e\u003ccode\u003e836a777\u003c/code\u003e\u003c/a\u003e)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eNext.jsの新しいLink APIに対応\u003c/li\u003e\n\u003cli\u003eスタイリングをインラインで適用するように変更\u003c/li\u003e\n\u003cli\u003eダークモード対応のスタイルを追加\u003c/li\u003e\n\u003cli\u003eアクセシビリティの向上\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e3. CI/CD環境の更新 (\u003ca href=\"https://github.com/tanabe1478/diary/commit/7ce4a19\"\u003e\u003ccode\u003e7ce4a19\u003c/code\u003e\u003c/a\u003e)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003eGitHub Actionsのワークフローを最新化\u003c/li\u003e\n\u003cli\u003eNode.js 20.17.0への更新\u003c/li\u003e\n\u003cli\u003eアクションのバージョンアップ（checkout v4, setup-node v4）\u003c/li\u003e\n\u003cli\u003eビルド環境の安定性向上\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e4. ビルド設定の最適化 (\u003ca href=\"https://github.com/tanabe1478/diary/commit/45389ad\"\u003e\u003ccode\u003e45389ad\u003c/code\u003e\u003c/a\u003e)\u003c/h3\u003e\n\u003cul\u003e\n\u003cli\u003e非推奨となった\u003ccode\u003enext export\u003c/code\u003eコマンドの削除\u003c/li\u003e\n\u003cli\u003e\u003ccode\u003enext.config.js\u003c/code\u003eでの\u003ccode\u003eoutput: 'export'\u003c/code\u003e設定への移行\u003c/li\u003e\n\u003cli\u003e画像最適化の設定追加\u003c/li\u003e\n\u003cli\u003eTypeScriptの型チェック追加\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3\u003e5. パッケージの段階的更新\u003c/h3\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eReact関連 (\u003ca href=\"https://github.com/tanabe1478/diary/commit/3447696\"\u003e\u003ccode\u003e3447696\u003c/code\u003e\u003c/a\u003e)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eReact 18系の安定版へ更新\u003c/li\u003e\n\u003cli\u003e型定義の更新\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eMarkdown処理関連 (\u003ca href=\"https://github.com/tanabe1478/diary/commit/12e9679\"\u003e\u003ccode\u003e12e9679\u003c/code\u003e\u003c/a\u003e)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eunified, remark, rehypeパッケージの更新\u003c/li\u003e\n\u003cli\u003eGitHub Flavored Markdownのサポート強化\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e開発ツール (\u003ca href=\"https://github.com/tanabe1478/diary/commit/7d70aea\"\u003e\u003ccode\u003e7d70aea\u003c/code\u003e\u003c/a\u003e)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eESLint, Prettier, TypeScriptの更新\u003c/li\u003e\n\u003cli\u003eコード品質管理の強化\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eユーティリティとCSSツール (\u003ca href=\"https://github.com/tanabe1478/diary/commit/5788f77\"\u003e\u003ccode\u003e5788f77\u003c/code\u003e\u003c/a\u003e)\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003edate-fns, glob関連パッケージの更新\u003c/li\u003e\n\u003cli\u003eTailwindCSS, PostCSSの更新\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003e技術的な改善点\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003eビルドシステムの最適化\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e静的エクスポート設定の現代化\u003c/li\u003e\n\u003cli\u003eビルドパフォーマンスの向上\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e型安全性の向上\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eTypeScript設定の強化\u003c/li\u003e\n\u003cli\u003e厳密な型チェックの導入\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e開発者体験の改善\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e最新のツールチェーンによる開発効率の向上\u003c/li\u003e\n\u003cli\u003eより良いエラー検出と修正提案\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003cstrong\u003e将来性への対応\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e最新のNext.js機能への対応準備\u003c/li\u003e\n\u003cli\u003eモダンなReactパターンの採用\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2\u003eまとめ\u003c/h2\u003e\n\u003cp\u003eこの更新作業により、プロジェクトの技術的負債を解消し、より安定した開発・運用基盤を整えることができました。特に、Next.jsの最新機能への対応とNode.js 20対応により、今後のアップデートもよりスムーズに行えるようになりました。\u003c/p\u003e","active_lock_reason":null,"assignee":null,"assignees":[],"author_association":"OWNER","closed_at":null,"comments":0,"comments_url":"https://api.github.com/repos/tanabe1478/diary/issues/16/comments","created_at":"2025-02-02T16:50:16Z","events_url":"https://api.github.com/repos/tanabe1478/diary/issues/16/events","html_url":"https://github.com/tanabe1478/diary/issues/16","id":2825897188,"labels":[],"labels_url":"https://api.github.com/repos/tanabe1478/diary/issues/16/labels{/name}","locked":false,"milestone":null,"node_id":"I_kwDOHrcnts6ob8Tk","number":16,"performed_via_github_app":null,"reactions":{"+1":0,"-1":0,"confused":0,"eyes":0,"heart":0,"hooray":0,"laugh":0,"rocket":0,"total_count":0,"url":"https://api.github.com/repos/tanabe1478/diary/issues/16/reactions"},"repository_url":"https://api.github.com/repos/tanabe1478/diary","state":"open","state_reason":null,"sub_issues_summary":{"completed":0,"percent_completed":0,"total":0},"timeline_url":"https://api.github.com/repos/tanabe1478/diary/issues/16/timeline","title":"Next.jsブログの大規模アップデート作業記録","updated_at":"2025-02-02T16:50:16Z","url":"https://api.github.com/repos/tanabe1478/diary/issues/16","user":{"avatar_url":"https://avatars.githubusercontent.com/u/18596776?v=4","events_url":"https://api.github.com/users/tanabe1478/events{/privacy}","followers_url":"https://api.github.com/users/tanabe1478/followers","following_url":"https://api.github.com/users/tanabe1478/following{/other_user}","gists_url":"https://api.github.com/users/tanabe1478/gists{/gist_id}","gravatar_id":"","html_url":"https://github.com/tanabe1478","id":18596776,"login":"tanabe1478","node_id":"MDQ6VXNlcjE4NTk2Nzc2","organizations_url":"https://api.github.com/users/tanabe1478/orgs","received_events_url":"https://api.github.com/users/tanabe1478/received_events","repos_url":"https://api.github.com/users/tanabe1478/repos","site_admin":false,"starred_url":"https://api.github.com/users/tanabe1478/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tanabe1478/subscriptions","type":"User","url":"https://api.github.com/users/tanabe1478","user_view_type":"public"}},"issueComments":[]},"__N_SSG":true},"page":"/articles/[issueNumber]","query":{"issueNumber":"16"},"buildId":"J_h71aom4t-UlO6CMNZQs","assetPrefix":"/diary","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>